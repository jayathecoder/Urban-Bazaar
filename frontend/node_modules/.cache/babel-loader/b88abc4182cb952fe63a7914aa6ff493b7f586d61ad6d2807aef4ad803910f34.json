{"ast":null,"code":"import React,{createContext,useEffect,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";export const ShopContext=/*#__PURE__*/createContext(null);const getDefaultCart=()=>{let cart={};for(let index=0;index<=300;index++){cart[index]=0;}return cart;};const ShopContextProvider=props=>{const[all_product,setAll_product]=useState([]);const[cartItems,setCartItems]=useState(getDefaultCart());useEffect(()=>{fetch(\"http://localhost:4000/allproducts\").then(response=>response.json()).then(data=>setAll_product(data)).catch(error=>console.error(\"Error fetching products:\",error));},[setAll_product]);useEffect(()=>{console.log(cartItems);},[cartItems]);const addToCart=itemId=>{setCartItems(prev=>({...prev,[itemId]:prev[itemId]+1}));};const removeFromCart=itemId=>{setCartItems(prev=>({...prev,[itemId]:prev[itemId]-1}));};const getTotalCartAmount=()=>{let totalAmount=0;for(const item in cartItems){if(cartItems[item]>0){let itemInfo=all_product.find(product=>product.id===Number(item));if(itemInfo){totalAmount+=itemInfo.new_price*cartItems[item];}}}return totalAmount;};const getTotalCartItems=()=>{let totalItem=0;for(const item in cartItems){if(cartItems[item]>0){totalItem+=cartItems[item];}}return totalItem;};const contextValue={getTotalCartItems,getTotalCartAmount,all_product,cartItems,addToCart,removeFromCart};return/*#__PURE__*/_jsx(ShopContext.Provider,{value:contextValue,children:props.children});};export default ShopContextProvider;","map":{"version":3,"names":["React","createContext","useEffect","useState","jsx","_jsx","ShopContext","getDefaultCart","cart","index","ShopContextProvider","props","all_product","setAll_product","cartItems","setCartItems","fetch","then","response","json","data","catch","error","console","log","addToCart","itemId","prev","removeFromCart","getTotalCartAmount","totalAmount","item","itemInfo","find","product","id","Number","new_price","getTotalCartItems","totalItem","contextValue","Provider","value","children"],"sources":["/Users/jayasharma/Downloads/Urban-Bazaar/frontend/src/Context/ShopContext.jsx"],"sourcesContent":["import React, { createContext, useEffect, useState } from \"react\";\n\nexport const ShopContext = createContext(null);\n\nconst getDefaultCart = () => {\n    let cart = {};\n    for (let index = 0; index <= 300; index++) {\n        cart[index] = 0;\n    }\n    return cart;\n};\n\nconst ShopContextProvider = (props) => {\n    const [all_product, setAll_product] = useState([]);\n    const [cartItems, setCartItems] = useState(getDefaultCart());\n\n    useEffect(() => {\n        fetch(\"http://localhost:4000/allproducts\")\n            .then((response) => response.json())\n            .then((data) => setAll_product(data))\n            .catch((error) => console.error(\"Error fetching products:\", error));\n    }, [setAll_product]);\n\n    useEffect(() => {\n        console.log(cartItems);\n    }, [cartItems]);\n\n    const addToCart = (itemId) => {\n        setCartItems((prev) => ({ ...prev, [itemId]: prev[itemId] + 1 }));\n    };\n\n    const removeFromCart = (itemId) => {\n        setCartItems((prev) => ({ ...prev, [itemId]: prev[itemId] - 1 }));\n    };\n\n    const getTotalCartAmount = () => {\n        let totalAmount = 0;\n        for (const item in cartItems) {\n            if (cartItems[item] > 0) {\n                let itemInfo = all_product.find(\n                    (product) => product.id === Number(item)\n                );\n                if (itemInfo) {\n                    totalAmount += itemInfo.new_price * cartItems[item];\n                }\n            }\n        }\n        return totalAmount;\n    };\n\n    const getTotalCartItems = () => {\n        let totalItem = 0;\n        for (const item in cartItems) {\n            if (cartItems[item] > 0) {\n                totalItem += cartItems[item];\n            }\n        }\n        return totalItem;\n    };\n\n    const contextValue = {\n        getTotalCartItems,\n        getTotalCartAmount,\n        all_product,\n        cartItems,\n        addToCart,\n        removeFromCart,\n    };\n\n    return (\n        <ShopContext.Provider value={contextValue}>\n            {props.children}\n        </ShopContext.Provider>\n    );\n};\n\nexport default ShopContextProvider;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}